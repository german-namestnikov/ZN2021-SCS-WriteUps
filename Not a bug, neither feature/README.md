# Not a bug, neither feature

## Описание
> Important! You will need initial access to Johan lab machine to solve this task!  
> 
> Somewhere in docs you found a strange login. Lets try break some unknown service.
> 
> http://verymoderndev.com : 43010,43011,43012

## Решение
Задача требовала от участника провести эксплуатацию интересного поведения сервиса Patroni в целях получения RCE. Для успешного решения нужно было воспользоваться логином, полученным при решении предыдущих задач, а также сбрутить или угадать пароль для доступа к Patroni HTTP API. Логин пользователя verym0dernadm1n можно было найти в виртуальной машине Johan в папке с документами.

После этого, участник мог самостоятельно обнаружить возможное небезопасное поведение сервиса, или найти issue на github с описанием проблемы. Суть такого поведения сервиса состоит в том, что сервис Patroni позволяет внедрять в активную конфигурацию PostgreSQL параметры, потенциально приводящие к удаленному исполнению кода, например archive_command.

Таким образом, для успешной эксплуатации необходимо было:
1. Успешно авторизоваться в HTTP API и разместить команду для исполнения.
2. Отправить запрос на /restart сервисов (опционально).

После этого участник получал RCE с возможностью прокинуть reverse shell с помощью nc или другого установленного в контейнере программного обеспечения.  
![![Getting flag](/Not%20a%20bug%2C%20neither%20feature/flaggo.png "Gettin da flag")](/Not%20a%20bug%2C%20neither%20feature/flaggo.png)  

Flag: <code> SCS_ZN2021{N0t_our_p4tr0n1} </code>
